package TestScripts;

import org.apache.log4j.Logger;
//import org.junit.After;
//import org.junit.Before;
import org.openqa.selenium.WebDriver;
import org.testng.TestListenerAdapter;
import org.testng.TestNG;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
import CommonTestScenarios.LandingOnHomePageChrome;
import CommonUtilities.GenericMethods;

public class MainDriverClass 
	WebDriver driver;
	GenericMethods GM;
	public static long WaitTime;
	LoginPageTests loginPage;
	CartTests cartTest;

	public MainDriverClass() {
		GM = new GenericMethods();
		GM.log = Logger.getLogger(MainDriverClass.class.getSimpleName());
		loginPage = new LoginPageTests();
		cartTest = new CartTests();
	}

	@BeforeTest
	public void setUp() throws Exception {
		driver = new LandingOnHomePageChrome().landingOnHomePage();
	}

	@Test(priority = 1)
	public void driverFucn() throws Exception {
		try {

			loginPage.CorrectLogin();
			loginPage.LoginWithEmptyUsername();
			loginPage.LoginWithEmptyPassword();
			loginPage.loginWithEmptyUsernameAndPassword();
			loginPage.incorrectLogin();
			loginPage.incorrectPassword();
			loginPage.incorrectLoginAndPassword();

//			cartTest.addItemToCartAndDeleteIt(driver);
//			cartTest.addAllItemsToCartAndDeleteIt();
//			cartTest.addItemToCartAndContinueShopping();
			Thread.sleep(2000);

		} catch (Exception e) {
			GM.log.info("Error occured while running the automation, will restart again.");
			Thread.sleep(5000);
			GM.tearDown(driver);
		}
	}

	@AfterTest
	public void close() {
		driver.quit();
	}

	@SuppressWarnings("deprecation")
	public static void main(String[] args) throws Exception {
		TestListenerAdapter tla = new TestListenerAdapter();
		TestNG testng = new TestNG();
		testng.setTestClasses(new Class[] { MainDriverClass.class });
		testng.addListener(tla);
		testng.run();
	}
}